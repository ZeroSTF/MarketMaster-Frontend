<div class="flex items-center gap-4 px-4 py-2 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700">
  <!-- Chart Types -->
  <div class="flex items-center gap-2">
    <mat-button-toggle-group [value]="chartType" class="!bg-gray-100 dark:!bg-gray-700 !border-0 !rounded-lg">
      @for (type of chartTypes; track type.value) {
      <mat-button-toggle [value]="type.value" (change)="onChartTypeChange(type.value)" [matTooltip]="type.name" class="!bg-transparent dark:!text-gray-200 hover:!bg-gray-200 dark:hover:!bg-gray-600
                 [&.mat-button-toggle-checked]:!bg-primary-500 [&.mat-button-toggle-checked]:!text-white">
        <mat-icon>{{type.icon}}</mat-icon>
      </mat-button-toggle>
      }
    </mat-button-toggle-group>
  </div>

  <!-- Timeframes -->
  <div class="flex-grow flex justify-center">
    <mat-button-toggle-group [value]="chartService.timeframe()"
      class="!bg-gray-100 dark:!bg-gray-700 !border-0 !rounded-lg">
      @for (tf of timeframes; track tf.value) {
      <mat-button-toggle [value]="tf.value" (change)="onTimeframeChange(tf)" [matTooltip]="tf.label" class="!bg-transparent dark:!text-gray-200 hover:!bg-gray-200 dark:hover:!bg-gray-600
                 [&.mat-button-toggle-checked]:!bg-primary-500 [&.mat-button-toggle-checked]:!text-white">
        {{tf.name}}
      </mat-button-toggle>
      }
    </mat-button-toggle-group>
  </div>

  <!-- Indicators -->
  <div class="flex items-center">
    <button mat-button [matMenuTriggerFor]="indicatorMenu"
      class="!text-gray-700 dark:!text-gray-200 hover:!bg-gray-100 dark:hover:!bg-gray-700">
      <mat-icon class="mr-2">add_chart</mat-icon>
      Indicators
    </button>
    <mat-menu #indicatorMenu="matMenu" class="dark:!bg-gray-800">
      @for (indicator of indicators; track indicator.type) {
      <button mat-menu-item (click)="toggleIndicator(indicator)" class="flex items-center gap-2 w-full px-4 py-2 text-gray-700 dark:text-gray-200
                 hover:bg-gray-100 dark:hover:bg-gray-700" [class.text-primary-500]="indicator.active">
        <mat-icon>{{indicator.icon}}</mat-icon>
        <span>{{indicator.name}}</span>
        @if (indicator.active) {
        <mat-icon class="ml-auto">check</mat-icon>
        }
      </button>
      }
    </mat-menu>
  </div>

  <!-- Settings -->
  <div>
    <button mat-icon-button [matMenuTriggerFor]="settingsMenu" matTooltip="Chart Settings"
      class="!text-gray-700 dark:!text-gray-200 hover:!bg-gray-100 dark:hover:!bg-gray-700">
      <mat-icon>settings</mat-icon>
    </button>
    <mat-menu #settingsMenu="matMenu" class="dark:!bg-gray-800">
      <button mat-menu-item class="flex items-center gap-2 w-full px-4 py-2 text-gray-700 dark:text-gray-200
               hover:bg-gray-100 dark:hover:bg-gray-700">
        <mat-icon>palette</mat-icon>
        <span>Change Theme</span>
      </button>
      <button mat-menu-item class="flex items-center gap-2 w-full px-4 py-2 text-gray-700 dark:text-gray-200
               hover:bg-gray-100 dark:hover:bg-gray-700">
        <mat-icon>grid_on</mat-icon>
        <span>Toggle Grid</span>
      </button>
      <button mat-menu-item class="flex items-center gap-2 w-full px-4 py-2 text-gray-700 dark:text-gray-200
               hover:bg-gray-100 dark:hover:bg-gray-700">
        <mat-icon>fullscreen</mat-icon>
        <span>Fullscreen</span>
      </button>
    </mat-menu>
  </div>
</div>